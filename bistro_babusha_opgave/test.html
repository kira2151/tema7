<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bistro Babushka</title>
    <link rel="shortcut icon" type="image/png" href="imgs/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Arapey" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="popup">
        <div class="popup_content">
            <img src="imgs/cancel.png" class="tilbage">
            <img src="" alt="" class="single_img" data-popupimg>
            <div class="popup_text">
                <h2 class="single_title" data-popupnavn></h2>
                <p data-popuplangbeskrivelse></p>
            </div>
        </div>
    </div>

    <header>
        <nav role="navigation" class="nav_mobile">
            <div id="menuToggle">
                <input class="brugermenu" type="checkbox" />
                <span></span>
                <span></span>
                <span></span>

                <ul id="menu">
                    <li class="responsive_menu"><a href="#velkommen">Velkommen</a></li>
                    <li class="responsive_menu"><a href="#menuen">Menu</a></li>
                    <li class="responsive_menu"><a href="#nyheder">Nyheder</a></li>
                    <li class="responsive_menu"><a href="#kontakt">Kontakt</a></li>
                </ul>
            </div>
        </nav>
        <div class="header_linjen1">
            <a href="www.facebook.com" target="_blank"><img class="social_icon" src="imgs/facebook.png" alt="facebook"></a>
            <a href="https://www.instagram.com/?hl=en "><img class="social_icon" src="imgs/instagram.png" alt="instagram"></a>
            <a href="#menuen" id="soeg">BESTIL ONLINE</a>
        </div>

        <img class="disktop_logo" src="imgs/logo_disktop-04.png" alt="Bistro Babushka logo disktop">

        <nav role="navigation" class="nav_disktop">
            <ul id="menu_disktop">
                <li class="responsive_menu"><a href="#velkommen">Velkommen</a></li>
                <li class="responsive_menu"><a href="#menuen">Menu</a></li>
                <li class="responsive_menu"><a href="#nyheder">nyheder</a></li>
                <li class="responsive_menu"><a href="#kontakt">Kontakt</a></li>
            </ul>
        </nav>
        <img class="mobile_logo" src="imgs/logo_mobile-03.png" alt="Bistro Babushka logo mobile">
    </header>


    <div id="velkommen">
        <div class="velkommen_kasse">
            <img class="velkommen_img" src="imgs/mad.jpg" alt="Russisk ret">
            <h1>Velkommen</h1>
            <p class="velkommen_p">Kæmpe udvalg af hjemmelavet russiske retter, Levering lige til døren, Bestil nemt og hurtigt. Bistro Babushka er en unik take away restaurant, der ikke ligner alle de andre. Vi går meget op i kvalitet og at alt vores mad er hjemmelavet. Vi tager dig med på en rejse til Rusland, og det er helt ikke ikke din sidste rejse hertil. </p>

        </div>
    </div>

    <div id="menuen">
        <dropdown>
            <input id="toggle2" type="checkbox">
            <label for="toggle2" class="animate">&#8681; Sorter efter<i class="fa fa-bars float-right"></i></label>
            <ul class="animate">
                <button class="animate" id="filter_alle_mobil">Alle</button>
                <button class="animate" id="filter_forretter_mobil">Forretter</button>
                <button class="animate" id="filter_hovedretter_mobil">Hovedretter</button>
                <button class="animate" id="filter_desserter_mobil">Desserter</button>
                <button class="animate" id="filter_sideorders_mobil">Side Orders</button>
                <button class="animate" id="filter_drikkevarer_mobil">Drikkevare</button>
            </ul>
        </dropdown>

        <nav class="mad_menu">
            <button id="filter_alle">Alle</button>
            <button id="filter_forretter">Forretter</button>
            <button id="filter_hovedretter">Hovedretter</button>
            <button id="filter_desserter">Desserter</button>
            <button id="filter_sideorders">Side Orders</button>
            <button id="filter_drikkevarer">Drikkevare</button>
        </nav>
        <main>
            <h1 id="overskrift" data-overskrift></h1>
            <section id="menu_container" data-container></section>
            <section class="retContainer"></section>
        </main>
        <template class="retTemplate" data-template>
        <article id="ret" data-ret>
        <img id="img" data-img src="" alt="">
        <h2 id="navn" data-navn></h2>
        <p id="kortbeskrivelse" data-kortbeskrivelse></p>
        <p id="langbeskrivelse_mobil" data-langbeskrivelse></p>
        <p id="pris" data-pris></p>
        </article>
    </template>
    </div>

    <div id="nyheder">
        <img class="nyhed_img" src="imgs/nyhedsbillede.jpg" alt="Russisk bord med mad">
        <h2>Tilmeld dig vores nyhedsbrev</h2>
        <p>og få lækre fordele hos Bisto Babushka, som eks. rabberter, gaver og spændende nyheder</p>
        <input name="email" type="text" id="email" placeholder="Email">
        <button id="submit">Tilmeld</button>
    </div>

    <footer>
        <div id="kontakt">
            <div class="adresse">
                <span class="kontakt_titel"><img class="kontakt_img" src="imgs/maps.png" alt="map"> Kontakt:</span>
                <p>Grønnegade 97<br>1234 København K.<br>Tlf: +45 12 34 56 78</p>
            </div>
            <div class="adresse"><span class="kontakt_titel"><img class="kontakt_img" src="imgs/clock.png" alt="clock"> Åbningstider:</span>
                <p>Mandag - Fredag: 10.30 til 22.00<br>Lørdag: 12.00 til 23.00<br>Søndag: Lukket</p>
            </div>
        </div>
    </footer>


    <!--JAVASCRIPT STARTER-->
    <script>
        let retter;
        window.addEventListener("load", getJson);

        async function getJson() {
            let jsonData = await fetch("json/menu.json");
            retter = await jsonData.json();
            visRetter(retter, "Alle retter");
            lavFiltre();
        }

        function visRetter(retter, overskrift) {
            let temp = document.querySelector(".retTemplate");
            let dest = document.querySelector(".retContainer");

            dest.innerHTML = ""; /////
            document.querySelector("#overskrift").textContent = overskrift;
            //for hver ret vis dem i DOM
            retter.forEach(ret => {
                let klon = temp.cloneNode(true).content;
                klon.querySelector("#navn").textContent = ret.navn;
                klon.querySelector("#pris").textContent = ret.pris + ",-";
                klon.querySelector("#kortbeskrivelse").textContent = ret.kortbeskrivelse;
                klon.querySelector("#langbeskrivelse_mobil").textContent = ret.langbeskrivelse;
                klon.querySelector("#img").src = "imgs/small/" + ret.billede + "-sm.jpg";
                klon.querySelector("#img").alt = "billede af" + ret.navn;
                klon.querySelector("#ret").setAttribute("data-id", ret.id);
                klon.querySelector("#ret").addEventListener("click", openModal);
                dest.appendChild(klon);
            });
        }

        function openModal() {
            let myId = this.getAttribute("data-id");
            let single = retter.find(ret => {
                //Hvis vores myId = ret.id så vis indhold
                if (myId == ret.id) {
                    document.querySelector(".popup").style.visibility = "visible";
                    document.querySelector("[data-popupnavn]").textContent = ret.navn;
                    document.querySelector("[data-popupimg]").src = "imgs/medium/" + ret.billede + "-md.jpg";
                    document.querySelector("[data-popuplangbeskrivelse] ").textContent = ret.langbeskrivelse;

                    document.querySelector(".tilbage").addEventListener("click", () => {
                        document.querySelector(".popup").style.visibility = "hidden";
                    });
                }
            });

            console.log(myId);
        }


        function lavFiltre() {
            //Find events der indeholder de valgte kategorier
            let forretter = retter.filter(ret => ret.kategori == "forretter");
            let hovedretter = retter.filter(ret => ret.kategori == "hovedretter");
            let desserter = retter.filter(ret => ret.kategori == "desserter");
            let sideorders = retter.filter(ret => ret.kategori == "sideorders");
            let drikkevarer = retter.filter(ret => ret.kategori == "drikkevarer");

            //DISKTOP
            //Kald visretter med de nye arrays - Soter retter efter kategori
            document.querySelector('#filter_alle').addEventListener("click", () => {
                visRetter(retter, "Alle retter");
            });
            document.querySelector('#filter_forretter').addEventListener("click", () => {
                visRetter(forretter, "Forretter");
            });
            document.querySelector('#filter_hovedretter').addEventListener("click", () => {
                visRetter(hovedretter, "Hovedretter");
            });
            document.querySelector('#filter_desserter').addEventListener("click", () => {
                visRetter(desserter, "Desserter ");
            });
            document.querySelector('#filter_sideorders').addEventListener("click", () => {
                visRetter(sideorders, "sideorders");
            });
            document.querySelector('#filter_drikkevarer').addEventListener("click", () => {
                visRetter(drikkevarer, "Drikkevarer");
            });
            //MOBIL
            //Kald visretter med de nye arrays - Soter retter efter kategori
            document.querySelector('#filter_alle_mobil').addEventListener("click", () => {
                visRetter(retter, "Menu");
            });
            document.querySelector('#filter_forretter_mobil').addEventListener("click", () => {
                visRetter(forretter, "Forretter");
            });
            document.querySelector('#filter_hovedretter_mobil').addEventListener("click", () => {
                visRetter(hovedretter, "Hovedretter");
            });
            document.querySelector('#filter_desserter_mobil').addEventListener("click", () => {
                visRetter(desserter, "Desserter");
            });
            document.querySelector('#filter_sideorders_mobil').addEventListener("click", () => {
                visRetter(sideorders, "sideorders");
            });
            document.querySelector('#filter_drikkevarer_mobil').addEventListener("click", () => {
                visRetter(drikkevarer, "Drikkevarer");
            });
        }
    </script>

    <!------Smooth Scroll to Section, fx #velkommen------->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

    <script>
        $(document).ready(function() {
            // Add smooth scrolling to all links
            $("a").on('click', function(event) {

                // Make sure this.hash has a value before overriding default behavior
                if (this.hash !== "") {
                    // Prevent default anchor click behavior
                    event.preventDefault();

                    // Store hash
                    var hash = this.hash;

                    // Using jQuery's animate() method to add smooth page scroll
                    // The optional number (800) specifies the number of milliseconds it takes to scroll to the specified area
                    $('html, body').animate({
                        scrollTop: $(hash).offset().top
                    }, 1000, function() {

                        // Add hash (#) to URL when done scrolling (default click behavior)
                        window.location.hash = hash;
                    });
                } // End if
            });
        });
    </script>

</body>

</html>
